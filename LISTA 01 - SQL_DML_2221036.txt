CREATE DATABASE ;
USE VENDA;

CREATE TABLE   enderecos (
  ID INT AUTO_INCREMENT PRIMARY KEY,
  CEP VARCHAR(10),
  RUA VARCHAR(255),
  CIDADE VARCHAR(255),
  UF VARCHAR(2),
  NUMERO INT(11)
);

CREATE TABLE   CLIENTES (
  ID INT AUTO_INCREMENT PRIMARY KEY,
  NOME VARCHAR(255),
  EMAIL VARCHAR(255),
  TELEFONE VARCHAR(255),
  ID_ENDERECO INT,
  FOREIGN KEY (ID_ENDERECO) REFERENCES enderecos(ID)  
);

CREATE TABLE   PEDIDOS (
  ID INT AUTO_INCREMENT PRIMARY KEY,
  ID_CLIENTE INT,
  DATA_PEDIDO DATE,
  VALOR_TOTAL DECIMAL(10,2),
  FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES(ID)
);

CREATE TABLE   FORNECEDORES (
  ID INT AUTO_INCREMENT PRIMARY KEY,
  NOME VARCHAR(255),
  EMAIL VARCHAR(255),
  TELEFONE VARCHAR(255),
  ID_ENDERECO INT,
  FOREIGN KEY (ID_ENDERECO) REFERENCES enderecos(ID) 
);

CREATE TABLE   COMPRAS (
  ID INT AUTO_INCREMENT PRIMARY KEY,
  ID_FORNECEDOR INT,
  DATA_COMPRA DATE,
  VALOR_TOTAL DECIMAL(10,2),
  FOREIGN KEY (ID_FORNECEDOR) REFERENCES FORNECEDORES(ID)
);

CREATE TABLE   PRODUTOS (
  ID_produto INT AUTO_INCREMENT PRIMARY KEY,
  Produto_Produto VARCHAR(50),
  Preco DECIMAL(10,2),
  ESTOQUE INT(11),
  ID_FORNECEDOR INT,
  FOREIGN KEY (ID_FORNECEDOR) REFERENCES FORNECEDORES(ID) 
);

CREATE TABLE   ITENS_COMPRA (
  ID_ITEM INT AUTO_INCREMENT PRIMARY KEY,
  ID_COMPRA INT,
  ID_PRODUTO INT,
  PRECO DECIMAL(10,2),
  QUANTIDADE INT(11),
  FOREIGN KEY (ID_COMPRA) REFERENCES COMPRAS(ID),
  FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTOS(ID_produto)
);

CREATE TABLE   ITENS_PEDIDO (
  ID_ITEM INT AUTO_INCREMENT PRIMARY KEY,
  ID_PEDIDO INT,
  ID_PRODUTO INT,
  PRECO_UNITARIO DECIMAL(10,2),
  QUANTIDADE INT(11),
  FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS(ID),
  FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTOS(ID_produto)
);



-- Inserindo dados na tabela enderecos
INSERT INTO enderecos (CEP, RUA, CIDADE, UF, NUMERO) VALUES ('12345-678', 'Rua dos Bobos', 'São Paulo', 'SP', 123);

-- Inserindo dados na tabela CLIENTES
INSERT INTO CLIENTES (NOME, EMAIL, TELEFONE, ID_ENDERECO) VALUES ('João Silva', 'joao.silva@example.com', '123456789', 1);

-- Inserindo dados na tabela PEDIDOS
INSERT INTO PEDIDOS (ID_CLIENTE, DATA_PEDIDO, VALOR_TOTAL) VALUES (1, '2024-03-04', 100.50);

-- Inserindo dados na tabela FORNECEDORES
INSERT INTO FORNECEDORES (NOME, EMAIL, TELEFONE, ID_ENDERECO) VALUES ('Fornecedor ABC', 'fornecedor.abc@example.com', '987654321', 1);

-- Inserindo dados na tabela COMPRAS
INSERT INTO COMPRAS (ID_FORNECEDOR, DATA_COMPRA, VALOR_TOTAL) VALUES (1, '2024-03-04', 200.50);

-- Inserindo dados na tabela PRODUTOS
INSERT INTO PRODUTOS (Produto_Produto, Preco, ESTOQUE, ID_FORNECEDOR) VALUES ('Produto 1', 50.00, 100, 1);

-- Inserindo dados na tabela ITENS_COMPRA
INSERT INTO ITENS_COMPRA (ID_COMPRA, ID_PRODUTO, PRECO, QUANTIDADE) VALUES (1, 1, 50.00, 2);

-- Inserindo dados na tabela ITENS_PEDIDO
INSERT INTO ITENS_PEDIDO (ID_PEDIDO, ID_PRODUTO, PRECO_UNITARIO, QUANTIDADE) VALUES (1, 1, 50.00, 2);

